<!DOCTYPE HTML>
<html>
	<head>
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=Edge">
		<meta name="viewport" content="width=device-width,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
		<title>Pull to Refresh</title>
		<link rel="stylesheet" href="css/reset.css" />
		<link rel="stylesheet" href="css/style.css" />
		<script type="text/javascript" src="js/jquery-2.0.3.min.js"></script>
		<script type="text/javascript" src="js/iscroll-probe.js"></script>
		<script type="text/javascript" src="js/pull2refresh.js"></script>
	</head>
	<body>
		<div id="goods-list-box">
			<ul id="goods-list"></ul>
		</div>
		
	<script>
		var a = $('#goods-list-box').pFresh({
			// 默认值不设置则保持不变
			
			// 请求 （POST请求）
			rUrl : 'data.php', // 请求数据地址，默认： #
			rParam : {'key' : 'iPhone 6s', 'va' : '2000'}, // 请求参数，默认：{}
			rCallback : apd, // 请求完成的回调函数，默认：function(){ return true; }
			// rDataType : 'json', // 返回数据格式（默认值）
			
			// 操作提示
			// txt2Fresh : '松开刷新', // （默认值）
			// txtLoading : '正在加载...', // （默认值）
			// txtLoaded : '加载完毕！', // （默认值）
			// txtLoadMore	: '上拉加载更多', // （默认值）
			
			// offsetH : 60, // 上拉高度，触发刷新（默认值）
			// bottomH : 30, // 底部空隙高度，提示文字空间；列表底部距浏览器窗口的下边距（默认值）
			
		}).updateList(); // 进入页面主动刷新数据，避免页面空白
		
		function apd(data){

			var html = '';
			for(i=0; i<data.plist.length; i++){
				html += 
				'<li class="goods-list-item">'+
					'<a href="../goods_detail/shop/pages/goods-detail.html"><img src="'+data.plist[i]['img']+'" '+
					'onerror="javascript:this.src=\'images/fen.png\'" '+
					'/></a>'+
					'<p class="goods-name-box">'+
						'<span class="goods-name">'+data.plist[i]['title']+'</span>'+
						'<span class="goods-seller">Taged</span>'+
					'</p>'+
					'<p><del style="color:#aaa; font-size:1em;">2342</del></p>'+
					'<p class="goods-price-box">'+
						'<span class="goods-price-fen-num numeric">'+data.plist[i]['price']+'</span>score'+
					'</p>'+
				'</li>';
			}
			
			$('#goods-list-box ul').append(html);
		}
		</script>
	</body>
</html>